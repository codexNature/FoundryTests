# Aderyn Analysis Report

This report was generated by [Aderyn](https://github.com/Cyfrin/aderyn), a static analysis tool built by [Cyfrin](https://cyfrin.io), a blockchain security company. This report is not a substitute for manual audit or security review. It should not be relied upon for any purpose other than to assist in the identification of potential security vulnerabilities.
# Table of Contents

- [Summary](#summary)
  - [Files Summary](#files-summary)
  - [Files Details](#files-details)
  - [Issue Summary](#issue-summary)
- [High Issues](#high-issues)
  - [H-1: Unprotected initializer](#h-1-unprotected-initializer)
  - [H-2: Unsafe Casting](#h-2-unsafe-casting)
  - [H-3: Incorrect Assembly Shift Parameter Order](#h-3-incorrect-assembly-shift-parameter-order)
  - [H-4: Uninitialized State Variables](#h-4-uninitialized-state-variables)
  - [H-5: Yul block contains `return` function call.](#h-5-yul-block-contains-return-function-call)
  - [H-6: Return value of the function call is not checked.](#h-6-return-value-of-the-function-call-is-not-checked)
  - [H-7: Usage of variable before declaration.](#h-7-usage-of-variable-before-declaration)
- [Low Issues](#low-issues)
  - [L-1: Centralization Risk for trusted owners](#l-1-centralization-risk-for-trusted-owners)
  - [L-2: Solidity pragma should be specific, not wide](#l-2-solidity-pragma-should-be-specific-not-wide)
  - [L-3: `public` functions not used internally could be marked `external`](#l-3-public-functions-not-used-internally-could-be-marked-external)
  - [L-4: Define and use `constant` variables instead of using literals](#l-4-define-and-use-constant-variables-instead-of-using-literals)
  - [L-5: Event is missing `indexed` fields](#l-5-event-is-missing-indexed-fields)
  - [L-6: The `nonReentrant` `modifier` should occur before all other modifiers](#l-6-the-nonreentrant-modifier-should-occur-before-all-other-modifiers)
  - [L-7: PUSH0 is not supported by all chains](#l-7-push0-is-not-supported-by-all-chains)
  - [L-8: Modifiers invoked only once can be shoe-horned into the function](#l-8-modifiers-invoked-only-once-can-be-shoe-horned-into-the-function)
  - [L-9: Empty Block](#l-9-empty-block)
  - [L-10: Large literal values multiples of 10000 can be replaced with scientific notation](#l-10-large-literal-values-multiples-of-10000-can-be-replaced-with-scientific-notation)
  - [L-11: Internal functions called only once can be inlined](#l-11-internal-functions-called-only-once-can-be-inlined)
  - [L-12: Contract still has TODOs](#l-12-contract-still-has-todos)
  - [L-13: Inconsistency in declaring uint256/uint (or) int256/int variables within a contract. Use explicit size declarations (uint256 or int256).](#l-13-inconsistency-in-declaring-uint256uint-or-int256int-variables-within-a-contract-use-explicit-size-declarations-uint256-or-int256)
  - [L-14: Unused Custom Error](#l-14-unused-custom-error)
  - [L-15: Potentially unused `private` / `internal` state variables found.](#l-15-potentially-unused-private--internal-state-variables-found)
  - [L-16: Costly operations inside loops.](#l-16-costly-operations-inside-loops)


# Summary

## Files Summary

| Key | Value |
| --- | --- |
| .sol Files | 47 |
| Total nSLOC | 6392 |


## Files Details

| Filepath | nSLOC |
| --- | --- |
| src/HooksFactory.sol | 463 |
| src/IHooksFactory.sol | 131 |
| src/ReentrancyGuard.sol | 40 |
| src/WildcatArchController.sol | 296 |
| src/WildcatSanctionsEscrow.sol | 33 |
| src/WildcatSanctionsSentinel.sol | 80 |
| src/access/AccessControlHooks.sol | 554 |
| src/access/FixedTermLoanHooks.sol | 589 |
| src/access/IHooks.sol | 90 |
| src/access/IRoleProvider.sol | 6 |
| src/access/MarketConstraintHooks.sol | 209 |
| src/interfaces/IChainalysisSanctionsList.sol | 4 |
| src/interfaces/IERC20.sol | 0 |
| src/interfaces/IMarketEventsAndErrors.sol | 98 |
| src/interfaces/ISphereXProtectedRegisteredBase.sol | 9 |
| src/interfaces/IWildcatArchController.sol | 79 |
| src/interfaces/IWildcatSanctionsEscrow.sol | 12 |
| src/interfaces/IWildcatSanctionsSentinel.sol | 37 |
| src/interfaces/WildcatStructsAndEnums.sol | 72 |
| src/libraries/BoolUtils.sol | 18 |
| src/libraries/Errors.sol | 41 |
| src/libraries/FIFOQueue.sol | 62 |
| src/libraries/FeeMath.sol | 95 |
| src/libraries/FunctionTypeCasts.sol | 27 |
| src/libraries/LibERC20.sol | 112 |
| src/libraries/LibStoredInitCode.sol | 131 |
| src/libraries/MarketErrors.sol | 225 |
| src/libraries/MarketEvents.sol | 213 |
| src/libraries/MarketState.sol | 82 |
| src/libraries/MathUtils.sol | 116 |
| src/libraries/SafeCastLib.sol | 106 |
| src/libraries/StringQuery.sol | 62 |
| src/libraries/Withdrawal.sol | 35 |
| src/market/WildcatMarket.sol | 173 |
| src/market/WildcatMarketBase.sol | 477 |
| src/market/WildcatMarketConfig.sol | 88 |
| src/market/WildcatMarketToken.sol | 61 |
| src/market/WildcatMarketWithdrawals.sol | 222 |
| src/spherex/ISphereXEngine.sol | 29 |
| src/spherex/SphereXConfig.sol | 111 |
| src/spherex/SphereXProtectedErrors.sol | 31 |
| src/spherex/SphereXProtectedEvents.sol | 35 |
| src/spherex/SphereXProtectedRegisteredBase.sol | 166 |
| src/types/HooksConfig.sol | 632 |
| src/types/LenderStatus.sol | 40 |
| src/types/RoleProvider.sol | 110 |
| src/types/TransientBytesArray.sol | 90 |
| **Total** | **6392** |


## Issue Summary

| Category | No. of Issues |
| --- | --- |
| High | 7 |
| Low | 16 |


# High Issues

## H-1: Unprotected initializer

Consider protecting the initializer functions with modifiers.

<details><summary>13 Found Instances</summary>


- Found in src/IHooksFactory.sol [Line: 80](src/IHooksFactory.sol#L80)

	```solidity
	  function marketInitCodeStorage() external view returns (address);
	```

- Found in src/IHooksFactory.sol [Line: 82](src/IHooksFactory.sol#L82)

	```solidity
	  function marketInitCodeHash() external view returns (uint256);
	```

- Found in src/interfaces/IWildcatSanctionsSentinel.sol [Line: 21](src/interfaces/IWildcatSanctionsSentinel.sol#L21)

	```solidity
	  function WildcatSanctionsEscrowInitcodeHash() external pure returns (bytes32);
	```

- Found in src/libraries/LibStoredInitCode.sol [Line: 8](src/libraries/LibStoredInitCode.sol#L8)

	```solidity
	  function deployInitCode(bytes memory data) internal returns (address initCodeStorage) {
	```

- Found in src/libraries/LibStoredInitCode.sol [Line: 81](src/libraries/LibStoredInitCode.sol#L81)

	```solidity
	  function createWithStoredInitCode(address initCodeStorage) internal returns (address deployment) {
	```

- Found in src/libraries/LibStoredInitCode.sol [Line: 85](src/libraries/LibStoredInitCode.sol#L85)

	```solidity
	  function createWithStoredInitCode(
	```

- Found in src/libraries/LibStoredInitCode.sol [Line: 101](src/libraries/LibStoredInitCode.sol#L101)

	```solidity
	  function create2WithStoredInitCode(
	```

- Found in src/libraries/LibStoredInitCode.sol [Line: 108](src/libraries/LibStoredInitCode.sol#L108)

	```solidity
	  function create2WithStoredInitCode(
	```

- Found in src/libraries/LibStoredInitCode.sol [Line: 125](src/libraries/LibStoredInitCode.sol#L125)

	```solidity
	  function create2WithStoredInitCode(
	```

- Found in src/libraries/LibStoredInitCode.sol [Line: 148](src/libraries/LibStoredInitCode.sol#L148)

	```solidity
	  function create2WithStoredInitCode(
	```

- Found in src/libraries/LibStoredInitCode.sol [Line: 156](src/libraries/LibStoredInitCode.sol#L156)

	```solidity
	  function create2WithStoredInitCodeCD(
	```

- Found in src/libraries/LibStoredInitCode.sol [Line: 179](src/libraries/LibStoredInitCode.sol#L179)

	```solidity
	  function create2WithStoredInitCodeCD(
	```

- Found in src/spherex/SphereXProtectedRegisteredBase.sol [Line: 46](src/spherex/SphereXProtectedRegisteredBase.sol#L46)

	```solidity
	  function __SphereXProtectedRegisteredBase_init(address engine) internal virtual {
	```

</details>



## H-2: Unsafe Casting

Downcasting int/uints in Solidity can be unsafe due to the potential for data loss and unintended behavior.When downcasting a larger integer type to a smaller one (e.g., uint256 to uint128), the value may exceed the range of the target type,leading to truncation and loss of significant digits. Use OpenZeppelin's SafeCast library to safely downcast integers.

<details><summary>5 Found Instances</summary>


- Found in src/access/AccessControlHooks.sol [Line: 174](src/access/AccessControlHooks.sol#L174)

	```solidity
	      emit MinimumDepositUpdated(marketAddress, uint128(minimumDeposit));
	```

- Found in src/access/FixedTermLoanHooks.sol [Line: 200](src/access/FixedTermLoanHooks.sol#L200)

	```solidity
	      emit MinimumDepositUpdated(marketAddress, uint128(minimumDeposit));
	```

- Found in src/access/MarketConstraintHooks.sol [Line: 175](src/access/MarketConstraintHooks.sol#L175)

	```solidity
	      temporaryReserveRatioBips = uint16(originalReserveRatioBips);
	```

- Found in src/libraries/FeeMath.sol [Line: 169](src/libraries/FeeMath.sol#L169)

	```solidity
	    state.lastInterestAccruedTimestamp = uint32(timestamp);
	```

- Found in src/types/LenderStatus.sol [Line: 61](src/types/LenderStatus.sol#L61)

	```solidity
	    status.lastApprovalTimestamp = uint32(timestamp);
	```

</details>



## H-3: Incorrect Assembly Shift Parameter Order

Example: `shl(shifted, 4)` will shift the right constant `4` by `a` bits. The correct order is `shl(4, shifted)`.

<details><summary>2 Found Instances</summary>


- Found in src/types/HooksConfig.sol [Line: 173](src/types/HooksConfig.sol#L173)

	```solidity
	      updatedHooks := or(hooks, shl(bitsAfter, 1))
	```

- Found in src/types/HooksConfig.sol [Line: 182](src/types/HooksConfig.sol#L182)

	```solidity
	      updatedHooks := and(hooks, not(shl(bitsAfter, 1)))
	```

</details>



## H-4: Uninitialized State Variables

Solidity does initialize variables by default when you declare them, however it's good practice to explicitly declare an initial value. For example, if you transfer money to an address we must make sure that the address has been initialized.

<details><summary>3 Found Instances</summary>


- Found in src/WildcatSanctionsEscrow.sol [Line: 13](src/WildcatSanctionsEscrow.sol#L13)

	```solidity
	  address public immutable override borrower;
	```

- Found in src/WildcatSanctionsEscrow.sol [Line: 14](src/WildcatSanctionsEscrow.sol#L14)

	```solidity
	  address public immutable override account;
	```

- Found in src/WildcatSanctionsEscrow.sol [Line: 15](src/WildcatSanctionsEscrow.sol#L15)

	```solidity
	  address internal immutable asset;
	```

</details>



## H-5: Yul block contains `return` function call.

Remove this, as this causes execution to halt. Nothing after that call will execute, including code following the assembly block.

<details><summary>5 Found Instances</summary>


- Found in src/market/WildcatMarketBase.sol [Line: 39](src/market/WildcatMarketBase.sol#L39)

	```solidity
	      return(0x20, 0x60)
	```

- Found in src/market/WildcatMarketBase.sol [Line: 93](src/market/WildcatMarketBase.sol#L93)

	```solidity
	      return(0, 0x80)
	```

- Found in src/market/WildcatMarketBase.sol [Line: 113](src/market/WildcatMarketBase.sol#L113)

	```solidity
	      return(0, 0x80)
	```

- Found in src/market/WildcatMarketBase.sol [Line: 335](src/market/WildcatMarketBase.sol#L335)

	```solidity
	      return(state, 0x1c0)
	```

- Found in src/market/WildcatMarketBase.sol [Line: 347](src/market/WildcatMarketBase.sol#L347)

	```solidity
	      return(state, 0x1c0)
	```

</details>



## H-6: Return value of the function call is not checked.

Function returns a value but it is ignored.

<details><summary>9 Found Instances</summary>


- Found in src/HooksFactory.sol [Line: 467](src/HooksFactory.sol#L467)

	```solidity
	    LibStoredInitCode.create2WithStoredInitCode(marketInitCodeStorage, salt);
	```

- Found in src/access/AccessControlHooks.sol [Line: 166](src/access/AccessControlHooks.sol#L166)

	```solidity
	    super._onCreateMarket(deployer, marketAddress, parameters, hooksData);
	```

- Found in src/access/FixedTermLoanHooks.sol [Line: 177](src/access/FixedTermLoanHooks.sol#L177)

	```solidity
	    super._onCreateMarket(deployer, marketAddress, parameters, hooksData);
	```

- Found in src/market/WildcatMarket.sol [Line: 41](src/market/WildcatMarket.sol#L41)

	```solidity
	    token.safeTransferAll(msg.sender);
	```

- Found in src/market/WildcatMarketBase.sol [Line: 460](src/market/WildcatMarketBase.sol#L460)

	```solidity
	          _applyWithdrawalBatchPayment(batch, state, expiry, availableLiquidity);
	```

- Found in src/market/WildcatMarketBase.sol [Line: 492](src/market/WildcatMarketBase.sol#L492)

	```solidity
	        state.updateScaleFactorAndFees(
	```

- Found in src/market/WildcatMarketBase.sol [Line: 511](src/market/WildcatMarketBase.sol#L511)

	```solidity
	      state.updateScaleFactorAndFees(
	```

- Found in src/market/WildcatMarketBase.sol [Line: 639](src/market/WildcatMarketBase.sol#L639)

	```solidity
	        _applyWithdrawalBatchPayment(batch, state, expiry, availableLiquidity);
	```

- Found in src/market/WildcatMarketWithdrawals.sol [Line: 122](src/market/WildcatMarketWithdrawals.sol#L122)

	```solidity
	      _applyWithdrawalBatchPayment(batch, state, expiry, availableLiquidity);
	```

</details>



## H-7: Usage of variable before declaration.

This is a bad practice that may lead to unintended consequences. Please declare the variable before using it.

<details><summary>1 Found Instances</summary>


- Found in src/spherex/SphereXProtectedRegisteredBase.sol [Line: 153](src/spherex/SphereXProtectedRegisteredBase.sol#L153)

	```solidity
	  ) internal returnsIfNotActivatedPre(locals) returns (ModifierLocals memory locals) {
	```

</details>



# Low Issues

## L-1: Centralization Risk for trusted owners

Contracts have owners with privileged rights to perform admin tasks and need to be trusted to not perform malicious updates or drain funds.

<details><summary>9 Found Instances</summary>


- Found in src/WildcatArchController.sol [Line: 10](src/WildcatArchController.sol#L10)

	```solidity
	contract WildcatArchController is SphereXConfig, Ownable {
	```

- Found in src/WildcatArchController.sol [Line: 157](src/WildcatArchController.sol#L157)

	```solidity
	  function registerBorrower(address borrower) external onlyOwner {
	```

- Found in src/WildcatArchController.sol [Line: 164](src/WildcatArchController.sol#L164)

	```solidity
	  function removeBorrower(address borrower) external onlyOwner {
	```

- Found in src/WildcatArchController.sol [Line: 200](src/WildcatArchController.sol#L200)

	```solidity
	  function addBlacklist(address asset) external onlyOwner {
	```

- Found in src/WildcatArchController.sol [Line: 207](src/WildcatArchController.sol#L207)

	```solidity
	  function removeBlacklist(address asset) external onlyOwner {
	```

- Found in src/WildcatArchController.sol [Line: 245](src/WildcatArchController.sol#L245)

	```solidity
	  function registerControllerFactory(address factory) external onlyOwner {
	```

- Found in src/WildcatArchController.sol [Line: 253](src/WildcatArchController.sol#L253)

	```solidity
	  function removeControllerFactory(address factory) external onlyOwner {
	```

- Found in src/WildcatArchController.sol [Line: 304](src/WildcatArchController.sol#L304)

	```solidity
	  function removeController(address controller) external onlyOwner {
	```

- Found in src/WildcatArchController.sol [Line: 355](src/WildcatArchController.sol#L355)

	```solidity
	  function removeMarket(address market) external onlyOwner {
	```

</details>



## L-2: Solidity pragma should be specific, not wide

Consider using a specific version of Solidity in your contracts instead of a wide version. For example, instead of `pragma solidity ^0.8.0;`, use `pragma solidity 0.8.0;`

<details><summary>46 Found Instances</summary>


- Found in src/HooksFactory.sol [Line: 2](src/HooksFactory.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/ReentrancyGuard.sol [Line: 2](src/ReentrancyGuard.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/WildcatArchController.sol [Line: 2](src/WildcatArchController.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/WildcatSanctionsEscrow.sol [Line: 2](src/WildcatSanctionsEscrow.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/WildcatSanctionsSentinel.sol [Line: 2](src/WildcatSanctionsSentinel.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/access/AccessControlHooks.sol [Line: 2](src/access/AccessControlHooks.sol#L2)

	```solidity
	pragma solidity ^0.8.20;
	```

- Found in src/access/FixedTermLoanHooks.sol [Line: 2](src/access/FixedTermLoanHooks.sol#L2)

	```solidity
	pragma solidity ^0.8.20;
	```

- Found in src/access/IHooks.sol [Line: 2](src/access/IHooks.sol#L2)

	```solidity
	pragma solidity ^0.8.20;
	```

- Found in src/access/IRoleProvider.sol [Line: 2](src/access/IRoleProvider.sol#L2)

	```solidity
	pragma solidity ^0.8.20;
	```

- Found in src/access/MarketConstraintHooks.sol [Line: 2](src/access/MarketConstraintHooks.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/interfaces/IChainalysisSanctionsList.sol [Line: 2](src/interfaces/IChainalysisSanctionsList.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/interfaces/IERC20.sol [Line: 2](src/interfaces/IERC20.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 2](src/interfaces/IMarketEventsAndErrors.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/interfaces/ISphereXProtectedRegisteredBase.sol [Line: 2](src/interfaces/ISphereXProtectedRegisteredBase.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/interfaces/IWildcatArchController.sol [Line: 2](src/interfaces/IWildcatArchController.sol#L2)

	```solidity
	pragma solidity ^0.8.20;
	```

- Found in src/interfaces/IWildcatSanctionsEscrow.sol [Line: 2](src/interfaces/IWildcatSanctionsEscrow.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/interfaces/IWildcatSanctionsSentinel.sol [Line: 2](src/interfaces/IWildcatSanctionsSentinel.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/interfaces/WildcatStructsAndEnums.sol [Line: 2](src/interfaces/WildcatStructsAndEnums.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/libraries/BoolUtils.sol [Line: 2](src/libraries/BoolUtils.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/libraries/Errors.sol [Line: 2](src/libraries/Errors.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/libraries/FIFOQueue.sol [Line: 2](src/libraries/FIFOQueue.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/libraries/FeeMath.sol [Line: 2](src/libraries/FeeMath.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/libraries/FunctionTypeCasts.sol [Line: 2](src/libraries/FunctionTypeCasts.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/libraries/LibERC20.sol [Line: 2](src/libraries/LibERC20.sol#L2)

	```solidity
	pragma solidity ^0.8.4;
	```

- Found in src/libraries/LibStoredInitCode.sol [Line: 2](src/libraries/LibStoredInitCode.sol#L2)

	```solidity
	pragma solidity >=0.8.24;
	```

- Found in src/libraries/MarketErrors.sol [Line: 1](src/libraries/MarketErrors.sol#L1)

	```solidity
	pragma solidity ^0.8.20;
	```

- Found in src/libraries/MarketEvents.sol [Line: 1](src/libraries/MarketEvents.sol#L1)

	```solidity
	pragma solidity ^0.8.20;
	```

- Found in src/libraries/MarketState.sol [Line: 2](src/libraries/MarketState.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/libraries/MathUtils.sol [Line: 2](src/libraries/MathUtils.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/libraries/SafeCastLib.sol [Line: 2](src/libraries/SafeCastLib.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/libraries/StringQuery.sol [Line: 2](src/libraries/StringQuery.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/libraries/Withdrawal.sol [Line: 2](src/libraries/Withdrawal.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/market/WildcatMarket.sol [Line: 2](src/market/WildcatMarket.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/market/WildcatMarketBase.sol [Line: 2](src/market/WildcatMarketBase.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/market/WildcatMarketConfig.sol [Line: 2](src/market/WildcatMarketConfig.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/market/WildcatMarketToken.sol [Line: 2](src/market/WildcatMarketToken.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/market/WildcatMarketWithdrawals.sol [Line: 2](src/market/WildcatMarketWithdrawals.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/spherex/ISphereXEngine.sol [Line: 3](src/spherex/ISphereXEngine.sol#L3)

	```solidity
	pragma solidity ^0.8.20;
	```

- Found in src/spherex/SphereXConfig.sol [Line: 3](src/spherex/SphereXConfig.sol#L3)

	```solidity
	pragma solidity ^0.8.20;
	```

- Found in src/spherex/SphereXProtectedErrors.sol [Line: 2](src/spherex/SphereXProtectedErrors.sol#L2)

	```solidity
	pragma solidity ^0.8.20;
	```

- Found in src/spherex/SphereXProtectedEvents.sol [Line: 2](src/spherex/SphereXProtectedEvents.sol#L2)

	```solidity
	pragma solidity ^0.8.20;
	```

- Found in src/spherex/SphereXProtectedRegisteredBase.sol [Line: 3](src/spherex/SphereXProtectedRegisteredBase.sol#L3)

	```solidity
	pragma solidity ^0.8.20;
	```

- Found in src/types/HooksConfig.sol [Line: 2](src/types/HooksConfig.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/types/LenderStatus.sol [Line: 2](src/types/LenderStatus.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/types/RoleProvider.sol [Line: 2](src/types/RoleProvider.sol#L2)

	```solidity
	pragma solidity ^0.8.20;
	```

- Found in src/types/TransientBytesArray.sol [Line: 2](src/types/TransientBytesArray.sol#L2)

	```solidity
	pragma solidity >=0.8.25;
	```

</details>



## L-3: `public` functions not used internally could be marked `external`

Instead of marking a function as `public`, consider marking it as `external` if it is not used internally.

<details><summary>11 Found Instances</summary>


- Found in src/WildcatSanctionsEscrow.sol [Line: 30](src/WildcatSanctionsEscrow.sol#L30)

	```solidity
	  function escrowedAsset() public view override returns (address, uint256) {
	```

- Found in src/WildcatSanctionsEscrow.sol [Line: 34](src/WildcatSanctionsEscrow.sol#L34)

	```solidity
	  function releaseEscrow() public override {
	```

- Found in src/WildcatSanctionsSentinel.sol [Line: 85](src/WildcatSanctionsSentinel.sol#L85)

	```solidity
	  function isSanctioned(address borrower, address account) public view override returns (bool) {
	```

- Found in src/WildcatSanctionsSentinel.sol [Line: 96](src/WildcatSanctionsSentinel.sol#L96)

	```solidity
	  function overrideSanction(address account) public override {
	```

- Found in src/WildcatSanctionsSentinel.sol [Line: 104](src/WildcatSanctionsSentinel.sol#L104)

	```solidity
	  function removeSanctionOverride(address account) public override {
	```

- Found in src/WildcatSanctionsSentinel.sol [Line: 121](src/WildcatSanctionsSentinel.sol#L121)

	```solidity
	  function createEscrow(
	```

- Found in src/access/AccessControlHooks.sol [Line: 917](src/access/AccessControlHooks.sol#L917)

	```solidity
	  function onSetAnnualInterestAndReserveRatioBips(
	```

- Found in src/access/FixedTermLoanHooks.sol [Line: 960](src/access/FixedTermLoanHooks.sol#L960)

	```solidity
	  function onSetAnnualInterestAndReserveRatioBips(
	```

- Found in src/market/WildcatMarketToken.sol [Line: 17](src/market/WildcatMarketToken.sol#L17)

	```solidity
	  function balanceOf(address account) public view virtual nonReentrantView returns (uint256) {
	```

- Found in src/market/WildcatMarketWithdrawals.sol [Line: 194](src/market/WildcatMarketWithdrawals.sol#L194)

	```solidity
	  function executeWithdrawal(
	```

- Found in src/market/WildcatMarketWithdrawals.sol [Line: 283](src/market/WildcatMarketWithdrawals.sol#L283)

	```solidity
	  function repayAndProcessUnpaidWithdrawalBatches(
	```

</details>



## L-4: Define and use `constant` variables instead of using literals

If the same constant literal value is used multiple times, create a constant state variable and reference it throughout the contract.

<details><summary>11 Found Instances</summary>


- Found in src/access/AccessControlHooks.sol [Line: 623](src/access/AccessControlHooks.sol#L623)

	```solidity
	    if (hooksData.length == 20) {
	```

- Found in src/access/AccessControlHooks.sol [Line: 631](src/access/AccessControlHooks.sol#L631)

	```solidity
	    } else if (hooksData.length > 20) {
	```

- Found in src/access/FixedTermLoanHooks.sol [Line: 660](src/access/FixedTermLoanHooks.sol#L660)

	```solidity
	    if (hooksData.length == 20) {
	```

- Found in src/access/FixedTermLoanHooks.sol [Line: 668](src/access/FixedTermLoanHooks.sol#L668)

	```solidity
	    } else if (hooksData.length > 20) {
	```

- Found in src/access/MarketConstraintHooks.sol [Line: 168](src/access/MarketConstraintHooks.sol#L168)

	```solidity
	      10000,
	```

- Found in src/access/MarketConstraintHooks.sol [Line: 179](src/access/MarketConstraintHooks.sol#L179)

	```solidity
	      uint256 boundRelativeDiff = MathUtils.min(10000, 2 * relativeDiff);
	```

- Found in src/market/WildcatMarket.sol [Line: 182](src/market/WildcatMarket.sol#L182)

	```solidity
	    _repay(state, outstandingDebt, 0x04);
	```

- Found in src/market/WildcatMarket.sol [Line: 189](src/market/WildcatMarket.sol#L189)

	```solidity
	    _repay(state, delinquentDebt, 0x04);
	```

- Found in src/market/WildcatMarket.sol [Line: 236](src/market/WildcatMarket.sol#L236)

	```solidity
	      _repay(state, remainingDebt, 0x04);
	```

- Found in src/market/WildcatMarketWithdrawals.sol [Line: 205](src/market/WildcatMarketWithdrawals.sol#L205)

	```solidity
	      _runtimeConstant(0x44)
	```

- Found in src/market/WildcatMarketWithdrawals.sol [Line: 299](src/market/WildcatMarketWithdrawals.sol#L299)

	```solidity
	    if (repayAmount > 0) hooks.onRepay(repayAmount, state, _runtimeConstant(0x44));
	```

</details>



## L-5: Event is missing `indexed` fields

Index event fields make the field more quickly accessible to off-chain tools that parse events. However, note that each index field costs extra gas during emission, so it's not necessarily best to index the maximum allowed per event (three fields). Each event should use three indexed fields if there are three or more fields, and gas usage is not particularly of concern for the events in question. If there are fewer than three fields, all of the fields should be indexed.

<details><summary>73 Found Instances</summary>


- Found in src/IHooksFactory.sol [Line: 41](src/IHooksFactory.sol#L41)

	```solidity
	  event HooksInstanceDeployed(address hooksInstance, address hooksTemplate);
	```

- Found in src/IHooksFactory.sol [Line: 42](src/IHooksFactory.sol#L42)

	```solidity
	  event HooksTemplateAdded(
	```

- Found in src/IHooksFactory.sol [Line: 50](src/IHooksFactory.sol#L50)

	```solidity
	  event HooksTemplateDisabled(address hooksTemplate);
	```

- Found in src/IHooksFactory.sol [Line: 51](src/IHooksFactory.sol#L51)

	```solidity
	  event HooksTemplateFeesUpdated(
	```

- Found in src/IHooksFactory.sol [Line: 59](src/IHooksFactory.sol#L59)

	```solidity
	  event MarketDeployed(
	```

- Found in src/WildcatArchController.sol [Line: 42](src/WildcatArchController.sol#L42)

	```solidity
	  event MarketAdded(address indexed controller, address market);
	```

- Found in src/WildcatArchController.sol [Line: 43](src/WildcatArchController.sol#L43)

	```solidity
	  event MarketRemoved(address market);
	```

- Found in src/WildcatArchController.sol [Line: 45](src/WildcatArchController.sol#L45)

	```solidity
	  event ControllerFactoryAdded(address controllerFactory);
	```

- Found in src/WildcatArchController.sol [Line: 46](src/WildcatArchController.sol#L46)

	```solidity
	  event ControllerFactoryRemoved(address controllerFactory);
	```

- Found in src/WildcatArchController.sol [Line: 48](src/WildcatArchController.sol#L48)

	```solidity
	  event BorrowerAdded(address borrower);
	```

- Found in src/WildcatArchController.sol [Line: 49](src/WildcatArchController.sol#L49)

	```solidity
	  event BorrowerRemoved(address borrower);
	```

- Found in src/WildcatArchController.sol [Line: 51](src/WildcatArchController.sol#L51)

	```solidity
	  event AssetBlacklisted(address asset);
	```

- Found in src/WildcatArchController.sol [Line: 52](src/WildcatArchController.sol#L52)

	```solidity
	  event AssetPermitted(address asset);
	```

- Found in src/WildcatArchController.sol [Line: 54](src/WildcatArchController.sol#L54)

	```solidity
	  event ControllerAdded(address indexed controllerFactory, address controller);
	```

- Found in src/WildcatArchController.sol [Line: 55](src/WildcatArchController.sol#L55)

	```solidity
	  event ControllerRemoved(address controller);
	```

- Found in src/access/AccessControlHooks.sol [Line: 41](src/access/AccessControlHooks.sol#L41)

	```solidity
	  event RoleProviderUpdated(
	```

- Found in src/access/AccessControlHooks.sol [Line: 46](src/access/AccessControlHooks.sol#L46)

	```solidity
	  event RoleProviderAdded(
	```

- Found in src/access/AccessControlHooks.sol [Line: 51](src/access/AccessControlHooks.sol#L51)

	```solidity
	  event RoleProviderRemoved(address indexed providerAddress, uint24 pullProviderIndex);
	```

- Found in src/access/AccessControlHooks.sol [Line: 54](src/access/AccessControlHooks.sol#L54)

	```solidity
	  event AccountAccessGranted(
	```

- Found in src/access/AccessControlHooks.sol [Line: 62](src/access/AccessControlHooks.sol#L62)

	```solidity
	  event MinimumDepositUpdated(address market, uint128 newMinimumDeposit);
	```

- Found in src/access/FixedTermLoanHooks.sol [Line: 45](src/access/FixedTermLoanHooks.sol#L45)

	```solidity
	  event RoleProviderUpdated(
	```

- Found in src/access/FixedTermLoanHooks.sol [Line: 50](src/access/FixedTermLoanHooks.sol#L50)

	```solidity
	  event RoleProviderAdded(
	```

- Found in src/access/FixedTermLoanHooks.sol [Line: 55](src/access/FixedTermLoanHooks.sol#L55)

	```solidity
	  event RoleProviderRemoved(address indexed providerAddress, uint24 pullProviderIndex);
	```

- Found in src/access/FixedTermLoanHooks.sol [Line: 58](src/access/FixedTermLoanHooks.sol#L58)

	```solidity
	  event AccountAccessGranted(
	```

- Found in src/access/FixedTermLoanHooks.sol [Line: 66](src/access/FixedTermLoanHooks.sol#L66)

	```solidity
	  event MinimumDepositUpdated(address market, uint128 newMinimumDeposit);
	```

- Found in src/access/FixedTermLoanHooks.sol [Line: 68](src/access/FixedTermLoanHooks.sol#L68)

	```solidity
	  event FixedTermUpdated(address market, uint32 fixedTermEndTime);
	```

- Found in src/access/MarketConstraintHooks.sol [Line: 22](src/access/MarketConstraintHooks.sol#L22)

	```solidity
	  event TemporaryExcessReserveRatioActivated(
	```

- Found in src/access/MarketConstraintHooks.sol [Line: 29](src/access/MarketConstraintHooks.sol#L29)

	```solidity
	  event TemporaryExcessReserveRatioUpdated(
	```

- Found in src/interfaces/IERC20.sol [Line: 5](src/interfaces/IERC20.sol#L5)

	```solidity
	  event Transfer(address indexed from, address indexed to, uint256 value);
	```

- Found in src/interfaces/IERC20.sol [Line: 6](src/interfaces/IERC20.sol#L6)

	```solidity
	  event Approval(address indexed owner, address indexed spender, uint256 value);
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 79](src/interfaces/IMarketEventsAndErrors.sol#L79)

	```solidity
	  event Transfer(address indexed from, address indexed to, uint256 value);
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 81](src/interfaces/IMarketEventsAndErrors.sol#L81)

	```solidity
	  event Approval(address indexed owner, address indexed spender, uint256 value);
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 83](src/interfaces/IMarketEventsAndErrors.sol#L83)

	```solidity
	  event MaxTotalSupplyUpdated(uint256 assets);
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 85](src/interfaces/IMarketEventsAndErrors.sol#L85)

	```solidity
	  event ProtocolFeeBipsUpdated(uint256 protocolFeeBips);
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 87](src/interfaces/IMarketEventsAndErrors.sol#L87)

	```solidity
	  event AnnualInterestBipsUpdated(uint256 annualInterestBipsUpdated);
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 89](src/interfaces/IMarketEventsAndErrors.sol#L89)

	```solidity
	  event ReserveRatioBipsUpdated(uint256 reserveRatioBipsUpdated);
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 91](src/interfaces/IMarketEventsAndErrors.sol#L91)

	```solidity
	  event SanctionedAccountAssetsSentToEscrow(
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 97](src/interfaces/IMarketEventsAndErrors.sol#L97)

	```solidity
	  event SanctionedAccountAssetsQueuedForWithdrawal(
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 104](src/interfaces/IMarketEventsAndErrors.sol#L104)

	```solidity
	  event Deposit(address indexed account, uint256 assetAmount, uint256 scaledAmount);
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 106](src/interfaces/IMarketEventsAndErrors.sol#L106)

	```solidity
	  event Borrow(uint256 assetAmount);
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 108](src/interfaces/IMarketEventsAndErrors.sol#L108)

	```solidity
	  event DebtRepaid(address indexed from, uint256 assetAmount);
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 110](src/interfaces/IMarketEventsAndErrors.sol#L110)

	```solidity
	  event MarketClosed(uint256 timestamp);
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 112](src/interfaces/IMarketEventsAndErrors.sol#L112)

	```solidity
	  event FeesCollected(uint256 assets);
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 114](src/interfaces/IMarketEventsAndErrors.sol#L114)

	```solidity
	  event StateUpdated(uint256 scaleFactor, bool isDelinquent);
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 116](src/interfaces/IMarketEventsAndErrors.sol#L116)

	```solidity
	  event InterestAndFeesAccrued(
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 131](src/interfaces/IMarketEventsAndErrors.sol#L131)

	```solidity
	  event WithdrawalBatchExpired(
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 144](src/interfaces/IMarketEventsAndErrors.sol#L144)

	```solidity
	  event WithdrawalBatchPayment(
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 150](src/interfaces/IMarketEventsAndErrors.sol#L150)

	```solidity
	  event WithdrawalQueued(
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 157](src/interfaces/IMarketEventsAndErrors.sol#L157)

	```solidity
	  event WithdrawalExecuted(
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 163](src/interfaces/IMarketEventsAndErrors.sol#L163)

	```solidity
	  event SanctionedAccountWithdrawalSentToEscrow(
	```

- Found in src/interfaces/ISphereXProtectedRegisteredBase.sol [Line: 7](src/interfaces/ISphereXProtectedRegisteredBase.sol#L7)

	```solidity
	  event ChangedSpherexOperator(address oldSphereXAdmin, address newSphereXAdmin);
	```

- Found in src/interfaces/ISphereXProtectedRegisteredBase.sol [Line: 9](src/interfaces/ISphereXProtectedRegisteredBase.sol#L9)

	```solidity
	  event ChangedSpherexEngineAddress(address oldEngineAddress, address newEngineAddress);
	```

- Found in src/interfaces/IWildcatArchController.sol [Line: 15](src/interfaces/IWildcatArchController.sol#L15)

	```solidity
	  event ChangedSpherexOperator(address oldSphereXAdmin, address newSphereXAdmin);
	```

- Found in src/interfaces/IWildcatArchController.sol [Line: 17](src/interfaces/IWildcatArchController.sol#L17)

	```solidity
	  event ChangedSpherexEngineAddress(address oldEngineAddress, address newEngineAddress);
	```

- Found in src/interfaces/IWildcatArchController.sol [Line: 19](src/interfaces/IWildcatArchController.sol#L19)

	```solidity
	  event SpherexAdminTransferStarted(address currentAdmin, address pendingAdmin);
	```

- Found in src/interfaces/IWildcatArchController.sol [Line: 21](src/interfaces/IWildcatArchController.sol#L21)

	```solidity
	  event SpherexAdminTransferCompleted(address oldAdmin, address newAdmin);
	```

- Found in src/interfaces/IWildcatArchController.sol [Line: 23](src/interfaces/IWildcatArchController.sol#L23)

	```solidity
	  event NewAllowedSenderOnchain(address sender);
	```

- Found in src/interfaces/IWildcatArchController.sol [Line: 55](src/interfaces/IWildcatArchController.sol#L55)

	```solidity
	  event ControllerFactoryAdded(address);
	```

- Found in src/interfaces/IWildcatArchController.sol [Line: 57](src/interfaces/IWildcatArchController.sol#L57)

	```solidity
	  event ControllerFactoryRemoved(address);
	```

- Found in src/interfaces/IWildcatArchController.sol [Line: 78](src/interfaces/IWildcatArchController.sol#L78)

	```solidity
	  event ControllerAdded(address, address);
	```

- Found in src/interfaces/IWildcatArchController.sol [Line: 80](src/interfaces/IWildcatArchController.sol#L80)

	```solidity
	  event ControllerRemoved(address);
	```

- Found in src/interfaces/IWildcatArchController.sol [Line: 101](src/interfaces/IWildcatArchController.sol#L101)

	```solidity
	  event BorrowerAdded(address);
	```

- Found in src/interfaces/IWildcatArchController.sol [Line: 103](src/interfaces/IWildcatArchController.sol#L103)

	```solidity
	  event BorrowerRemoved(address);
	```

- Found in src/interfaces/IWildcatArchController.sol [Line: 147](src/interfaces/IWildcatArchController.sol#L147)

	```solidity
	  event MarketAdded(address, address);
	```

- Found in src/interfaces/IWildcatArchController.sol [Line: 149](src/interfaces/IWildcatArchController.sol#L149)

	```solidity
	  event MarketRemoved(address);
	```

- Found in src/interfaces/IWildcatSanctionsEscrow.sol [Line: 5](src/interfaces/IWildcatSanctionsEscrow.sol#L5)

	```solidity
	  event EscrowReleased(address indexed account, address indexed asset, uint256 amount);
	```

- Found in src/spherex/SphereXConfig.sol [Line: 42](src/spherex/SphereXConfig.sol#L42)

	```solidity
	  event ChangedSpherexOperator(address oldSphereXAdmin, address newSphereXAdmin);
	```

- Found in src/spherex/SphereXConfig.sol [Line: 43](src/spherex/SphereXConfig.sol#L43)

	```solidity
	  event ChangedSpherexEngineAddress(address oldEngineAddress, address newEngineAddress);
	```

- Found in src/spherex/SphereXConfig.sol [Line: 44](src/spherex/SphereXConfig.sol#L44)

	```solidity
	  event SpherexAdminTransferStarted(address currentAdmin, address pendingAdmin);
	```

- Found in src/spherex/SphereXConfig.sol [Line: 45](src/spherex/SphereXConfig.sol#L45)

	```solidity
	  event SpherexAdminTransferCompleted(address oldAdmin, address newAdmin);
	```

- Found in src/spherex/SphereXConfig.sol [Line: 46](src/spherex/SphereXConfig.sol#L46)

	```solidity
	  event NewAllowedSenderOnchain(address sender);
	```

- Found in src/spherex/SphereXProtectedRegisteredBase.sol [Line: 58](src/spherex/SphereXProtectedRegisteredBase.sol#L58)

	```solidity
	  event ChangedSpherexOperator(address oldSphereXAdmin, address newSphereXAdmin);
	```

- Found in src/spherex/SphereXProtectedRegisteredBase.sol [Line: 59](src/spherex/SphereXProtectedRegisteredBase.sol#L59)

	```solidity
	  event ChangedSpherexEngineAddress(address oldEngineAddress, address newEngineAddress);
	```

</details>



## L-6: The `nonReentrant` `modifier` should occur before all other modifiers

This is a best-practice to protect against reentrancy in other modifiers.

<details><summary>4 Found Instances</summary>


- Found in src/market/WildcatMarket.sol [Line: 146](src/market/WildcatMarket.sol#L146)

	```solidity
	  function borrow(uint256 amount) external onlyBorrower nonReentrant sphereXGuardExternal {
	```

- Found in src/market/WildcatMarket.sol [Line: 226](src/market/WildcatMarket.sol#L226)

	```solidity
	  function closeMarket() external onlyBorrower nonReentrant sphereXGuardExternal {
	```

- Found in src/market/WildcatMarketConfig.sol [Line: 103](src/market/WildcatMarketConfig.sol#L103)

	```solidity
	  ) external onlyBorrower nonReentrant sphereXGuardExternal {
	```

- Found in src/market/WildcatMarketConfig.sol [Line: 126](src/market/WildcatMarketConfig.sol#L126)

	```solidity
	  ) external onlyBorrower nonReentrant sphereXGuardExternal {
	```

</details>



## L-7: PUSH0 is not supported by all chains

Solc compiler version 0.8.20 switches the default target EVM version to Shanghai, which means that the generated bytecode will include PUSH0 opcodes. Be sure to select the appropriate EVM version in case you intend to deploy on a chain other than mainnet like L2 chains that may not support PUSH0, otherwise deployment of your contracts will fail.

<details><summary>46 Found Instances</summary>


- Found in src/HooksFactory.sol [Line: 2](src/HooksFactory.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/ReentrancyGuard.sol [Line: 2](src/ReentrancyGuard.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/WildcatArchController.sol [Line: 2](src/WildcatArchController.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/WildcatSanctionsEscrow.sol [Line: 2](src/WildcatSanctionsEscrow.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/WildcatSanctionsSentinel.sol [Line: 2](src/WildcatSanctionsSentinel.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/access/AccessControlHooks.sol [Line: 2](src/access/AccessControlHooks.sol#L2)

	```solidity
	pragma solidity ^0.8.20;
	```

- Found in src/access/FixedTermLoanHooks.sol [Line: 2](src/access/FixedTermLoanHooks.sol#L2)

	```solidity
	pragma solidity ^0.8.20;
	```

- Found in src/access/IHooks.sol [Line: 2](src/access/IHooks.sol#L2)

	```solidity
	pragma solidity ^0.8.20;
	```

- Found in src/access/IRoleProvider.sol [Line: 2](src/access/IRoleProvider.sol#L2)

	```solidity
	pragma solidity ^0.8.20;
	```

- Found in src/access/MarketConstraintHooks.sol [Line: 2](src/access/MarketConstraintHooks.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/interfaces/IChainalysisSanctionsList.sol [Line: 2](src/interfaces/IChainalysisSanctionsList.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/interfaces/IERC20.sol [Line: 2](src/interfaces/IERC20.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 2](src/interfaces/IMarketEventsAndErrors.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/interfaces/ISphereXProtectedRegisteredBase.sol [Line: 2](src/interfaces/ISphereXProtectedRegisteredBase.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/interfaces/IWildcatArchController.sol [Line: 2](src/interfaces/IWildcatArchController.sol#L2)

	```solidity
	pragma solidity ^0.8.20;
	```

- Found in src/interfaces/IWildcatSanctionsEscrow.sol [Line: 2](src/interfaces/IWildcatSanctionsEscrow.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/interfaces/IWildcatSanctionsSentinel.sol [Line: 2](src/interfaces/IWildcatSanctionsSentinel.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/interfaces/WildcatStructsAndEnums.sol [Line: 2](src/interfaces/WildcatStructsAndEnums.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/libraries/BoolUtils.sol [Line: 2](src/libraries/BoolUtils.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/libraries/Errors.sol [Line: 2](src/libraries/Errors.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/libraries/FIFOQueue.sol [Line: 2](src/libraries/FIFOQueue.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/libraries/FeeMath.sol [Line: 2](src/libraries/FeeMath.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/libraries/FunctionTypeCasts.sol [Line: 2](src/libraries/FunctionTypeCasts.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/libraries/LibERC20.sol [Line: 2](src/libraries/LibERC20.sol#L2)

	```solidity
	pragma solidity ^0.8.4;
	```

- Found in src/libraries/LibStoredInitCode.sol [Line: 2](src/libraries/LibStoredInitCode.sol#L2)

	```solidity
	pragma solidity >=0.8.24;
	```

- Found in src/libraries/MarketErrors.sol [Line: 1](src/libraries/MarketErrors.sol#L1)

	```solidity
	pragma solidity ^0.8.20;
	```

- Found in src/libraries/MarketEvents.sol [Line: 1](src/libraries/MarketEvents.sol#L1)

	```solidity
	pragma solidity ^0.8.20;
	```

- Found in src/libraries/MarketState.sol [Line: 2](src/libraries/MarketState.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/libraries/MathUtils.sol [Line: 2](src/libraries/MathUtils.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/libraries/SafeCastLib.sol [Line: 2](src/libraries/SafeCastLib.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/libraries/StringQuery.sol [Line: 2](src/libraries/StringQuery.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/libraries/Withdrawal.sol [Line: 2](src/libraries/Withdrawal.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/market/WildcatMarket.sol [Line: 2](src/market/WildcatMarket.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/market/WildcatMarketBase.sol [Line: 2](src/market/WildcatMarketBase.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/market/WildcatMarketConfig.sol [Line: 2](src/market/WildcatMarketConfig.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/market/WildcatMarketToken.sol [Line: 2](src/market/WildcatMarketToken.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/market/WildcatMarketWithdrawals.sol [Line: 2](src/market/WildcatMarketWithdrawals.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/spherex/ISphereXEngine.sol [Line: 3](src/spherex/ISphereXEngine.sol#L3)

	```solidity
	pragma solidity ^0.8.20;
	```

- Found in src/spherex/SphereXConfig.sol [Line: 3](src/spherex/SphereXConfig.sol#L3)

	```solidity
	pragma solidity ^0.8.20;
	```

- Found in src/spherex/SphereXProtectedErrors.sol [Line: 2](src/spherex/SphereXProtectedErrors.sol#L2)

	```solidity
	pragma solidity ^0.8.20;
	```

- Found in src/spherex/SphereXProtectedEvents.sol [Line: 2](src/spherex/SphereXProtectedEvents.sol#L2)

	```solidity
	pragma solidity ^0.8.20;
	```

- Found in src/spherex/SphereXProtectedRegisteredBase.sol [Line: 3](src/spherex/SphereXProtectedRegisteredBase.sol#L3)

	```solidity
	pragma solidity ^0.8.20;
	```

- Found in src/types/HooksConfig.sol [Line: 2](src/types/HooksConfig.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/types/LenderStatus.sol [Line: 2](src/types/LenderStatus.sol#L2)

	```solidity
	pragma solidity >=0.8.20;
	```

- Found in src/types/RoleProvider.sol [Line: 2](src/types/RoleProvider.sol#L2)

	```solidity
	pragma solidity ^0.8.20;
	```

- Found in src/types/TransientBytesArray.sol [Line: 2](src/types/TransientBytesArray.sol#L2)

	```solidity
	pragma solidity >=0.8.25;
	```

</details>



## L-8: Modifiers invoked only once can be shoe-horned into the function



<details><summary>7 Found Instances</summary>


- Found in src/WildcatArchController.sol [Line: 289](src/WildcatArchController.sol#L289)

	```solidity
	  modifier onlyControllerFactory() {
	```

- Found in src/WildcatArchController.sol [Line: 340](src/WildcatArchController.sol#L340)

	```solidity
	  modifier onlyController() {
	```

- Found in src/spherex/SphereXConfig.sol [Line: 65](src/spherex/SphereXConfig.sol#L65)

	```solidity
	  modifier spherexOnlyOperator() {
	```

- Found in src/spherex/SphereXConfig.sol [Line: 72](src/spherex/SphereXConfig.sol#L72)

	```solidity
	  modifier spherexOnlyOperatorOrAdmin() {
	```

- Found in src/spherex/SphereXProtectedRegisteredBase.sol [Line: 65](src/spherex/SphereXProtectedRegisteredBase.sol#L65)

	```solidity
	  modifier spherexOnlyOperator() {
	```

- Found in src/spherex/SphereXProtectedRegisteredBase.sol [Line: 72](src/spherex/SphereXProtectedRegisteredBase.sol#L72)

	```solidity
	  modifier returnsIfNotActivatedPre(ModifierLocals memory locals) {
	```

- Found in src/spherex/SphereXProtectedRegisteredBase.sol [Line: 81](src/spherex/SphereXProtectedRegisteredBase.sol#L81)

	```solidity
	  modifier returnsIfNotActivatedPost(ModifierLocals memory locals) {
	```

</details>



## L-9: Empty Block

Consider removing empty blocks.

<details><summary>17 Found Instances</summary>


- Found in src/access/AccessControlHooks.sol [Line: 217](src/access/AccessControlHooks.sol#L217)

	```solidity
	  function addRoleProvider(address providerAddress, uint32 timeToLive) external onlyBorrower {
	```

- Found in src/access/AccessControlHooks.sol [Line: 830](src/access/AccessControlHooks.sol#L830)

	```solidity
	  function onExecuteWithdrawal(
	```

- Found in src/access/AccessControlHooks.sol [Line: 885](src/access/AccessControlHooks.sol#L885)

	```solidity
	  function onBorrow(
	```

- Found in src/access/AccessControlHooks.sol [Line: 894](src/access/AccessControlHooks.sol#L894)

	```solidity
	  function onRepay(
	```

- Found in src/access/AccessControlHooks.sol [Line: 900](src/access/AccessControlHooks.sol#L900)

	```solidity
	  function onCloseMarket(
	```

- Found in src/access/AccessControlHooks.sol [Line: 905](src/access/AccessControlHooks.sol#L905)

	```solidity
	  function onNukeFromOrbit(
	```

- Found in src/access/AccessControlHooks.sol [Line: 911](src/access/AccessControlHooks.sol#L911)

	```solidity
	  function onSetMaxTotalSupply(
	```

- Found in src/access/AccessControlHooks.sol [Line: 937](src/access/AccessControlHooks.sol#L937)

	```solidity
	  function onSetProtocolFeeBips(
	```

- Found in src/access/FixedTermLoanHooks.sol [Line: 254](src/access/FixedTermLoanHooks.sol#L254)

	```solidity
	  function addRoleProvider(address providerAddress, uint32 timeToLive) external onlyBorrower {
	```

- Found in src/access/FixedTermLoanHooks.sol [Line: 873](src/access/FixedTermLoanHooks.sol#L873)

	```solidity
	  function onExecuteWithdrawal(
	```

- Found in src/access/FixedTermLoanHooks.sol [Line: 928](src/access/FixedTermLoanHooks.sol#L928)

	```solidity
	  function onBorrow(
	```

- Found in src/access/FixedTermLoanHooks.sol [Line: 937](src/access/FixedTermLoanHooks.sol#L937)

	```solidity
	  function onRepay(
	```

- Found in src/access/FixedTermLoanHooks.sol [Line: 943](src/access/FixedTermLoanHooks.sol#L943)

	```solidity
	  function onCloseMarket(
	```

- Found in src/access/FixedTermLoanHooks.sol [Line: 948](src/access/FixedTermLoanHooks.sol#L948)

	```solidity
	  function onNukeFromOrbit(
	```

- Found in src/access/FixedTermLoanHooks.sol [Line: 954](src/access/FixedTermLoanHooks.sol#L954)

	```solidity
	  function onSetMaxTotalSupply(
	```

- Found in src/access/FixedTermLoanHooks.sol [Line: 980](src/access/FixedTermLoanHooks.sol#L980)

	```solidity
	  function onSetProtocolFeeBips(
	```

- Found in src/market/WildcatMarketBase.sol [Line: 393](src/market/WildcatMarketBase.sol#L393)

	```solidity
	  function _blockAccount(MarketState memory state, address accountAddress) internal virtual {}
	```

</details>



## L-10: Large literal values multiples of 10000 can be replaced with scientific notation

Use `e` notation, for example: `1e18`, instead of its full numeric value.

<details><summary>6 Found Instances</summary>


- Found in src/access/MarketConstraintHooks.sol [Line: 44](src/access/MarketConstraintHooks.sol#L44)

	```solidity
	  uint16 internal constant MaximumReserveRatioBips = 10_000;
	```

- Found in src/access/MarketConstraintHooks.sol [Line: 47](src/access/MarketConstraintHooks.sol#L47)

	```solidity
	  uint16 internal constant MaximumDelinquencyFeeBips = 10_000;
	```

- Found in src/access/MarketConstraintHooks.sol [Line: 53](src/access/MarketConstraintHooks.sol#L53)

	```solidity
	  uint16 internal constant MaximumAnnualInterestBips = 10_000;
	```

- Found in src/access/MarketConstraintHooks.sol [Line: 168](src/access/MarketConstraintHooks.sol#L168)

	```solidity
	      10000,
	```

- Found in src/access/MarketConstraintHooks.sol [Line: 179](src/access/MarketConstraintHooks.sol#L179)

	```solidity
	      uint256 boundRelativeDiff = MathUtils.min(10000, 2 * relativeDiff);
	```

- Found in src/market/WildcatMarket.sol [Line: 247](src/market/WildcatMarket.sol#L247)

	```solidity
	    state.reserveRatioBips = 10000;
	```

</details>



## L-11: Internal functions called only once can be inlined

Instead of separating the logic into a separate function, consider inlining the logic into the calling function. This can reduce the number of function calls and improve readability.

<details><summary>56 Found Instances</summary>


- Found in src/access/MarketConstraintHooks.sol [Line: 77](src/access/MarketConstraintHooks.sol#L77)

	```solidity
	  function enforceParameterConstraints(
	```

- Found in src/libraries/FeeMath.sol [Line: 19](src/libraries/FeeMath.sol#L19)

	```solidity
	  function calculateLinearInterestFromBips(
	```

- Found in src/libraries/FeeMath.sol [Line: 88](src/libraries/FeeMath.sol#L88)

	```solidity
	  function updateTimeDelinquentAndGetPenaltyTime(
	```

- Found in src/libraries/LibStoredInitCode.sol [Line: 85](src/libraries/LibStoredInitCode.sol#L85)

	```solidity
	  function createWithStoredInitCode(
	```

- Found in src/libraries/LibStoredInitCode.sol [Line: 108](src/libraries/LibStoredInitCode.sol#L108)

	```solidity
	  function create2WithStoredInitCode(
	```

- Found in src/libraries/LibStoredInitCode.sol [Line: 125](src/libraries/LibStoredInitCode.sol#L125)

	```solidity
	  function create2WithStoredInitCode(
	```

- Found in src/libraries/LibStoredInitCode.sol [Line: 156](src/libraries/LibStoredInitCode.sol#L156)

	```solidity
	  function create2WithStoredInitCodeCD(
	```

- Found in src/libraries/MarketErrors.sol [Line: 6](src/libraries/MarketErrors.sol#L6)

	```solidity
	function revert_MaxSupplyExceeded() pure {
	```

- Found in src/libraries/MarketErrors.sol [Line: 16](src/libraries/MarketErrors.sol#L16)

	```solidity
	function revert_CapacityChangeOnClosedMarket() pure {
	```

- Found in src/libraries/MarketErrors.sol [Line: 26](src/libraries/MarketErrors.sol#L26)

	```solidity
	function revert_AprChangeOnClosedMarket() pure {
	```

- Found in src/libraries/MarketErrors.sol [Line: 36](src/libraries/MarketErrors.sol#L36)

	```solidity
	function revert_MarketAlreadyClosed() pure {
	```

- Found in src/libraries/MarketErrors.sol [Line: 66](src/libraries/MarketErrors.sol#L66)

	```solidity
	function revert_BadLaunchCode() pure {
	```

- Found in src/libraries/MarketErrors.sol [Line: 76](src/libraries/MarketErrors.sol#L76)

	```solidity
	function revert_ReserveRatioBipsTooHigh() pure {
	```

- Found in src/libraries/MarketErrors.sol [Line: 92](src/libraries/MarketErrors.sol#L92)

	```solidity
	function revert_AnnualInterestBipsTooHigh() pure {
	```

- Found in src/libraries/MarketErrors.sol [Line: 102](src/libraries/MarketErrors.sol#L102)

	```solidity
	function revert_AccountBlocked() pure {
	```

- Found in src/libraries/MarketErrors.sol [Line: 112](src/libraries/MarketErrors.sol#L112)

	```solidity
	function revert_BorrowAmountTooHigh() pure {
	```

- Found in src/libraries/MarketErrors.sol [Line: 122](src/libraries/MarketErrors.sol#L122)

	```solidity
	function revert_BadRescueAsset() pure {
	```

- Found in src/libraries/MarketErrors.sol [Line: 132](src/libraries/MarketErrors.sol#L132)

	```solidity
	function revert_InsufficientReservesForFeeWithdrawal() pure {
	```

- Found in src/libraries/MarketErrors.sol [Line: 152](src/libraries/MarketErrors.sol#L152)

	```solidity
	function revert_NullMintAmount() pure {
	```

- Found in src/libraries/MarketErrors.sol [Line: 172](src/libraries/MarketErrors.sol#L172)

	```solidity
	function revert_NullFeeAmount() pure {
	```

- Found in src/libraries/MarketErrors.sol [Line: 182](src/libraries/MarketErrors.sol#L182)

	```solidity
	function revert_NullTransferAmount() pure {
	```

- Found in src/libraries/MarketErrors.sol [Line: 192](src/libraries/MarketErrors.sol#L192)

	```solidity
	function revert_NullWithdrawalAmount() pure {
	```

- Found in src/libraries/MarketErrors.sol [Line: 212](src/libraries/MarketErrors.sol#L212)

	```solidity
	function revert_DepositToClosedMarket() pure {
	```

- Found in src/libraries/MarketErrors.sol [Line: 232](src/libraries/MarketErrors.sol#L232)

	```solidity
	function revert_BorrowWhileSanctioned() pure {
	```

- Found in src/libraries/MarketErrors.sol [Line: 242](src/libraries/MarketErrors.sol#L242)

	```solidity
	function revert_BorrowFromClosedMarket() pure {
	```

- Found in src/libraries/MarketErrors.sol [Line: 252](src/libraries/MarketErrors.sol#L252)

	```solidity
	function revert_CloseMarketWithUnpaidWithdrawals() pure {
	```

- Found in src/libraries/MarketErrors.sol [Line: 262](src/libraries/MarketErrors.sol#L262)

	```solidity
	function revert_InsufficientReservesForNewLiquidityRatio() pure {
	```

- Found in src/libraries/MarketErrors.sol [Line: 272](src/libraries/MarketErrors.sol#L272)

	```solidity
	function revert_InsufficientReservesForOldLiquidityRatio() pure {
	```

- Found in src/libraries/MarketErrors.sol [Line: 282](src/libraries/MarketErrors.sol#L282)

	```solidity
	function revert_InvalidArrayLength() pure {
	```

- Found in src/libraries/MarketErrors.sol [Line: 292](src/libraries/MarketErrors.sol#L292)

	```solidity
	function revert_ProtocolFeeTooHigh() pure {
	```

- Found in src/libraries/MarketErrors.sol [Line: 302](src/libraries/MarketErrors.sol#L302)

	```solidity
	function revert_ProtocolFeeChangeOnClosedMarket() pure {
	```

- Found in src/libraries/MarketErrors.sol [Line: 312](src/libraries/MarketErrors.sol#L312)

	```solidity
	function revert_ProtocolFeeNotChanged() pure {
	```

- Found in src/libraries/MarketErrors.sol [Line: 321](src/libraries/MarketErrors.sol#L321)

	```solidity
	function revert_NotFactory() pure {
	```

- Found in src/libraries/MarketEvents.sol [Line: 17](src/libraries/MarketEvents.sol#L17)

	```solidity
	function emit_Approval(address owner, address spender, uint256 value) {
	```

- Found in src/libraries/MarketEvents.sol [Line: 30](src/libraries/MarketEvents.sol#L30)

	```solidity
	function emit_MaxTotalSupplyUpdated(uint256 assets) {
	```

- Found in src/libraries/MarketEvents.sol [Line: 44](src/libraries/MarketEvents.sol#L44)

	```solidity
	function emit_AnnualInterestBipsUpdated(uint256 annualInterestBipsUpdated) {
	```

- Found in src/libraries/MarketEvents.sol [Line: 51](src/libraries/MarketEvents.sol#L51)

	```solidity
	function emit_ReserveRatioBipsUpdated(uint256 reserveRatioBipsUpdated) {
	```

- Found in src/libraries/MarketEvents.sol [Line: 66](src/libraries/MarketEvents.sol#L66)

	```solidity
	function emit_SanctionedAccountAssetsQueuedForWithdrawal(
	```

- Found in src/libraries/MarketEvents.sol [Line: 82](src/libraries/MarketEvents.sol#L82)

	```solidity
	function emit_Deposit(address account, uint256 assetAmount, uint256 scaledAmount) {
	```

- Found in src/libraries/MarketEvents.sol [Line: 90](src/libraries/MarketEvents.sol#L90)

	```solidity
	function emit_Borrow(uint256 assetAmount) {
	```

- Found in src/libraries/MarketEvents.sol [Line: 104](src/libraries/MarketEvents.sol#L104)

	```solidity
	function emit_MarketClosed(uint256 _timestamp) {
	```

- Found in src/libraries/MarketEvents.sol [Line: 111](src/libraries/MarketEvents.sol#L111)

	```solidity
	function emit_FeesCollected(uint256 assets) {
	```

- Found in src/libraries/MarketEvents.sol [Line: 118](src/libraries/MarketEvents.sol#L118)

	```solidity
	function emit_StateUpdated(uint256 scaleFactor, bool isDelinquent) {
	```

- Found in src/libraries/MarketEvents.sol [Line: 156](src/libraries/MarketEvents.sol#L156)

	```solidity
	function emit_WithdrawalBatchExpired(
	```

- Found in src/libraries/MarketEvents.sol [Line: 172](src/libraries/MarketEvents.sol#L172)

	```solidity
	function emit_WithdrawalBatchCreated(uint256 expiry) {
	```

- Found in src/libraries/MarketEvents.sol [Line: 184](src/libraries/MarketEvents.sol#L184)

	```solidity
	function emit_WithdrawalBatchPayment(
	```

- Found in src/libraries/MarketEvents.sol [Line: 196](src/libraries/MarketEvents.sol#L196)

	```solidity
	function emit_WithdrawalQueued(
	```

- Found in src/libraries/MarketEvents.sol [Line: 215](src/libraries/MarketEvents.sol#L215)

	```solidity
	function emit_WithdrawalExecuted(uint256 expiry, address account, uint256 normalizedAmount) {
	```

- Found in src/libraries/MarketEvents.sol [Line: 228](src/libraries/MarketEvents.sol#L228)

	```solidity
	function emit_SanctionedAccountWithdrawalSentToEscrow(
	```

- Found in src/libraries/StringQuery.sol [Line: 10](src/libraries/StringQuery.sol#L10)

	```solidity
	function bytes32ToString(bytes32 value) pure returns (string memory str) {
	```

- Found in src/spherex/SphereXProtectedErrors.sol [Line: 11](src/spherex/SphereXProtectedErrors.sol#L11)

	```solidity
	function revert_SphereXAdminRequired() pure {
	```

- Found in src/spherex/SphereXProtectedErrors.sol [Line: 18](src/spherex/SphereXProtectedErrors.sol#L18)

	```solidity
	function revert_SphereXOperatorOrAdminRequired() pure {
	```

- Found in src/spherex/SphereXProtectedErrors.sol [Line: 25](src/spherex/SphereXProtectedErrors.sol#L25)

	```solidity
	function revert_SphereXNotPendingAdmin() pure {
	```

- Found in src/spherex/SphereXProtectedErrors.sol [Line: 32](src/spherex/SphereXProtectedErrors.sol#L32)

	```solidity
	function revert_SphereXNotEngine() pure {
	```

- Found in src/spherex/SphereXProtectedEvents.sol [Line: 20](src/spherex/SphereXProtectedEvents.sol#L20)

	```solidity
	function emit_SpherexAdminTransferStarted(address currentAdmin, address pendingAdmin) {
	```

- Found in src/types/TransientBytesArray.sol [Line: 16](src/types/TransientBytesArray.sol#L16)

	```solidity
	  function readToPointer(
	```

</details>



## L-12: Contract still has TODOs

Contract contains comments with TODOS

<details><summary>1 Found Instances</summary>


- Found in src/spherex/SphereXProtectedRegisteredBase.sol [Line: 22](src/spherex/SphereXProtectedRegisteredBase.sol#L22)

	```solidity
	abstract contract SphereXProtectedRegisteredBase {
	```

</details>



## L-13: Inconsistency in declaring uint256/uint (or) int256/int variables within a contract. Use explicit size declarations (uint256 or int256).

Consider keeping the naming convention consistent in a given contract. Explicit size declarations are preferred (uint256, int256) over implicit ones (uint, int) to avoid confusion.

<details><summary>53 Found Instances</summary>


- Found in src/HooksFactory.sol [Line: 555](src/HooksFactory.sol#L555)

	```solidity
	    uint marketStartIndex,
	```

- Found in src/HooksFactory.sol [Line: 556](src/HooksFactory.sol#L556)

	```solidity
	    uint marketEndIndex
	```

- Found in src/IHooksFactory.sol [Line: 247](src/IHooksFactory.sol#L247)

	```solidity
	    uint marketStartIndex,
	```

- Found in src/IHooksFactory.sol [Line: 248](src/IHooksFactory.sol#L248)

	```solidity
	    uint marketEndIndex
	```

- Found in src/access/AccessControlHooks.sol [Line: 479](src/access/AccessControlHooks.sol#L479)

	```solidity
	    uint getCredentialSelector = uint32(IRoleProvider.getCredential.selector);
	```

- Found in src/access/AccessControlHooks.sol [Line: 530](src/access/AccessControlHooks.sol#L530)

	```solidity
	    uint validateSelector = uint32(IRoleProvider.validateCredential.selector);
	```

- Found in src/access/AccessControlHooks.sol [Line: 534](src/access/AccessControlHooks.sol#L534)

	```solidity
	    uint credentialTimestamp;
	```

- Found in src/access/AccessControlHooks.sol [Line: 535](src/access/AccessControlHooks.sol#L535)

	```solidity
	    uint invalidCredentialReturnedSelector = uint32(InvalidCredentialReturned.selector);
	```

- Found in src/access/AccessControlHooks.sol [Line: 771](src/access/AccessControlHooks.sol#L771)

	```solidity
	    uint scaledAmount,
	```

- Found in src/access/AccessControlHooks.sol [Line: 785](src/access/AccessControlHooks.sol#L785)

	```solidity
	    uint normalizedAmount = scaledAmount.rayMul(state.scaleFactor);
	```

- Found in src/access/AccessControlHooks.sol [Line: 815](src/access/AccessControlHooks.sol#L815)

	```solidity
	    uint /* scaledAmount */,
	```

- Found in src/access/AccessControlHooks.sol [Line: 854](src/access/AccessControlHooks.sol#L854)

	```solidity
	    uint /* scaledAmount */,
	```

- Found in src/access/AccessControlHooks.sol [Line: 886](src/access/AccessControlHooks.sol#L886)

	```solidity
	    uint /* normalizedAmount */,
	```

- Found in src/access/AccessControlHooks.sol [Line: 895](src/access/AccessControlHooks.sol#L895)

	```solidity
	    uint normalizedAmount,
	```

- Found in src/access/FixedTermLoanHooks.sol [Line: 516](src/access/FixedTermLoanHooks.sol#L516)

	```solidity
	    uint getCredentialSelector = uint32(IRoleProvider.getCredential.selector);
	```

- Found in src/access/FixedTermLoanHooks.sol [Line: 567](src/access/FixedTermLoanHooks.sol#L567)

	```solidity
	    uint validateSelector = uint32(IRoleProvider.validateCredential.selector);
	```

- Found in src/access/FixedTermLoanHooks.sol [Line: 571](src/access/FixedTermLoanHooks.sol#L571)

	```solidity
	    uint credentialTimestamp;
	```

- Found in src/access/FixedTermLoanHooks.sol [Line: 572](src/access/FixedTermLoanHooks.sol#L572)

	```solidity
	    uint invalidCredentialReturnedSelector = uint32(InvalidCredentialReturned.selector);
	```

- Found in src/access/FixedTermLoanHooks.sol [Line: 807](src/access/FixedTermLoanHooks.sol#L807)

	```solidity
	    uint scaledAmount,
	```

- Found in src/access/FixedTermLoanHooks.sol [Line: 821](src/access/FixedTermLoanHooks.sol#L821)

	```solidity
	    uint normalizedAmount = scaledAmount.rayMul(state.scaleFactor);
	```

- Found in src/access/FixedTermLoanHooks.sol [Line: 851](src/access/FixedTermLoanHooks.sol#L851)

	```solidity
	    uint /* scaledAmount */,
	```

- Found in src/access/FixedTermLoanHooks.sol [Line: 897](src/access/FixedTermLoanHooks.sol#L897)

	```solidity
	    uint /* scaledAmount */,
	```

- Found in src/access/FixedTermLoanHooks.sol [Line: 929](src/access/FixedTermLoanHooks.sol#L929)

	```solidity
	    uint /* normalizedAmount */,
	```

- Found in src/access/FixedTermLoanHooks.sol [Line: 938](src/access/FixedTermLoanHooks.sol#L938)

	```solidity
	    uint normalizedAmount,
	```

- Found in src/access/IHooks.sol [Line: 52](src/access/IHooks.sol#L52)

	```solidity
	    uint scaledAmount,
	```

- Found in src/access/IHooks.sol [Line: 68](src/access/IHooks.sol#L68)

	```solidity
	    uint scaledAmount,
	```

- Found in src/access/IHooks.sol [Line: 74](src/access/IHooks.sol#L74)

	```solidity
	    uint normalizedAmount,
	```

- Found in src/access/IHooks.sol [Line: 80](src/access/IHooks.sol#L80)

	```solidity
	    uint normalizedAmount,
	```

- Found in src/market/WildcatMarketBase.sol [Line: 58](src/market/WildcatMarketBase.sol#L58)

	```solidity
	  uint public immutable delinquencyFeeBips;
	```

- Found in src/market/WildcatMarketBase.sol [Line: 61](src/market/WildcatMarketBase.sol#L61)

	```solidity
	  uint public immutable delinquencyGracePeriod;
	```

- Found in src/market/WildcatMarketBase.sol [Line: 64](src/market/WildcatMarketBase.sol#L64)

	```solidity
	  uint public immutable withdrawalBatchDuration;
	```

- Found in src/market/WildcatMarketBase.sol [Line: 177](src/market/WildcatMarketBase.sol#L177)

	```solidity
	      uint maxTotalSupply = parameters.maxTotalSupply;
	```

- Found in src/market/WildcatMarketBase.sol [Line: 178](src/market/WildcatMarketBase.sol#L178)

	```solidity
	      uint reserveRatioBips = parameters.reserveRatioBips;
	```

- Found in src/market/WildcatMarketBase.sol [Line: 179](src/market/WildcatMarketBase.sol#L179)

	```solidity
	      uint annualInterestBips = parameters.annualInterestBips;
	```

- Found in src/market/WildcatMarketBase.sol [Line: 180](src/market/WildcatMarketBase.sol#L180)

	```solidity
	      uint protocolFeeBips = parameters.protocolFeeBips;
	```

- Found in src/market/WildcatMarketBase.sol [Line: 546](src/market/WildcatMarketBase.sol#L546)

	```solidity
	      uint maxTotalSupply = state.maxTotalSupply;
	```

- Found in src/market/WildcatMarketBase.sol [Line: 556](src/market/WildcatMarketBase.sol#L556)

	```solidity
	      uint accruedProtocolFees = state.accruedProtocolFees;
	```

- Found in src/market/WildcatMarketBase.sol [Line: 557](src/market/WildcatMarketBase.sol#L557)

	```solidity
	      uint normalizedUnclaimedWithdrawals = state.normalizedUnclaimedWithdrawals;
	```

- Found in src/market/WildcatMarketBase.sol [Line: 567](src/market/WildcatMarketBase.sol#L567)

	```solidity
	      uint scaledTotalSupply = state.scaledTotalSupply;
	```

- Found in src/market/WildcatMarketBase.sol [Line: 568](src/market/WildcatMarketBase.sol#L568)

	```solidity
	      uint scaledPendingWithdrawals = state.scaledPendingWithdrawals;
	```

- Found in src/market/WildcatMarketBase.sol [Line: 569](src/market/WildcatMarketBase.sol#L569)

	```solidity
	      uint pendingWithdrawalExpiry = state.pendingWithdrawalExpiry;
	```

- Found in src/market/WildcatMarketBase.sol [Line: 587](src/market/WildcatMarketBase.sol#L587)

	```solidity
	      uint timeDelinquent = state.timeDelinquent;
	```

- Found in src/market/WildcatMarketBase.sol [Line: 588](src/market/WildcatMarketBase.sol#L588)

	```solidity
	      uint protocolFeeBips = state.protocolFeeBips;
	```

- Found in src/market/WildcatMarketBase.sol [Line: 589](src/market/WildcatMarketBase.sol#L589)

	```solidity
	      uint annualInterestBips = state.annualInterestBips;
	```

- Found in src/market/WildcatMarketBase.sol [Line: 590](src/market/WildcatMarketBase.sol#L590)

	```solidity
	      uint reserveRatioBips = state.reserveRatioBips;
	```

- Found in src/market/WildcatMarketBase.sol [Line: 591](src/market/WildcatMarketBase.sol#L591)

	```solidity
	      uint scaleFactor = state.scaleFactor;
	```

- Found in src/market/WildcatMarketBase.sol [Line: 592](src/market/WildcatMarketBase.sol#L592)

	```solidity
	      uint lastInterestAccruedTimestamp = state.lastInterestAccruedTimestamp;
	```

- Found in src/market/WildcatMarketToken.sol [Line: 72](src/market/WildcatMarketToken.sol#L72)

	```solidity
	  function _transfer(address from, address to, uint256 amount, uint baseCalldataSize) internal virtual {
	```

- Found in src/market/WildcatMarketWithdrawals.sol [Line: 85](src/market/WildcatMarketWithdrawals.sol#L85)

	```solidity
	    uint normalizedAmount,
	```

- Found in src/market/WildcatMarketWithdrawals.sol [Line: 86](src/market/WildcatMarketWithdrawals.sol#L86)

	```solidity
	    uint baseCalldataSize
	```

- Found in src/market/WildcatMarketWithdrawals.sol [Line: 95](src/market/WildcatMarketWithdrawals.sol#L95)

	```solidity
	      uint duration = state.isClosed.ternary(0, withdrawalBatchDuration);
	```

- Found in src/market/WildcatMarketWithdrawals.sol [Line: 235](src/market/WildcatMarketWithdrawals.sol#L235)

	```solidity
	    uint baseCalldataSize
	```

- Found in src/types/HooksConfig.sol [Line: 787](src/types/HooksConfig.sol#L787)

	```solidity
	  function onSetProtocolFeeBips(HooksConfig self, uint protocolFeeBips, MarketState memory state) internal {
	```

</details>



## L-14: Unused Custom Error

it is recommended that the definition be removed when custom error is unused

<details><summary>66 Found Instances</summary>


- Found in src/IHooksFactory.sol [Line: 31](src/IHooksFactory.sol#L31)

	```solidity
	  error DeploymentFailed();
	```

- Found in src/IHooksFactory.sol [Line: 37](src/IHooksFactory.sol#L37)

	```solidity
	  error NameOrSymbolTooLong();
	```

- Found in src/IHooksFactory.sol [Line: 39](src/IHooksFactory.sol#L39)

	```solidity
	  error SetProtocolFeeBipsFailed();
	```

- Found in src/ReentrancyGuard.sol [Line: 26](src/ReentrancyGuard.sol#L26)

	```solidity
	  error NoReentrantCalls();
	```

- Found in src/access/AccessControlHooks.sol [Line: 76](src/access/AccessControlHooks.sol#L76)

	```solidity
	  error InvalidCredentialReturned();
	```

- Found in src/access/FixedTermLoanHooks.sol [Line: 82](src/access/FixedTermLoanHooks.sol#L82)

	```solidity
	  error InvalidCredentialReturned();
	```

- Found in src/access/MarketConstraintHooks.sol [Line: 16](src/access/MarketConstraintHooks.sol#L16)

	```solidity
	  error DelinquencyGracePeriodOutOfBounds();
	```

- Found in src/access/MarketConstraintHooks.sol [Line: 17](src/access/MarketConstraintHooks.sol#L17)

	```solidity
	  error ReserveRatioBipsOutOfBounds();
	```

- Found in src/access/MarketConstraintHooks.sol [Line: 18](src/access/MarketConstraintHooks.sol#L18)

	```solidity
	  error DelinquencyFeeBipsOutOfBounds();
	```

- Found in src/access/MarketConstraintHooks.sol [Line: 19](src/access/MarketConstraintHooks.sol#L19)

	```solidity
	  error WithdrawalBatchDurationOutOfBounds();
	```

- Found in src/access/MarketConstraintHooks.sol [Line: 20](src/access/MarketConstraintHooks.sol#L20)

	```solidity
	  error AnnualInterestBipsOutOfBounds();
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 8](src/interfaces/IMarketEventsAndErrors.sol#L8)

	```solidity
	  error MaxSupplyExceeded();
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 11](src/interfaces/IMarketEventsAndErrors.sol#L11)

	```solidity
	  error NotApprovedBorrower();
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 14](src/interfaces/IMarketEventsAndErrors.sol#L14)

	```solidity
	  error NotApprovedLender();
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 17](src/interfaces/IMarketEventsAndErrors.sol#L17)

	```solidity
	  error NotFactory();
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 20](src/interfaces/IMarketEventsAndErrors.sol#L20)

	```solidity
	  error BadLaunchCode();
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 23](src/interfaces/IMarketEventsAndErrors.sol#L23)

	```solidity
	  error AccountBlocked();
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 25](src/interfaces/IMarketEventsAndErrors.sol#L25)

	```solidity
	  error BadRescueAsset();
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 27](src/interfaces/IMarketEventsAndErrors.sol#L27)

	```solidity
	  error BorrowAmountTooHigh();
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 29](src/interfaces/IMarketEventsAndErrors.sol#L29)

	```solidity
	  error InsufficientReservesForFeeWithdrawal();
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 31](src/interfaces/IMarketEventsAndErrors.sol#L31)

	```solidity
	  error WithdrawalBatchNotExpired();
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 33](src/interfaces/IMarketEventsAndErrors.sol#L33)

	```solidity
	  error NullMintAmount();
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 35](src/interfaces/IMarketEventsAndErrors.sol#L35)

	```solidity
	  error NullBurnAmount();
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 37](src/interfaces/IMarketEventsAndErrors.sol#L37)

	```solidity
	  error NullFeeAmount();
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 39](src/interfaces/IMarketEventsAndErrors.sol#L39)

	```solidity
	  error NullTransferAmount();
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 41](src/interfaces/IMarketEventsAndErrors.sol#L41)

	```solidity
	  error NullWithdrawalAmount();
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 43](src/interfaces/IMarketEventsAndErrors.sol#L43)

	```solidity
	  error NullRepayAmount();
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 45](src/interfaces/IMarketEventsAndErrors.sol#L45)

	```solidity
	  error MarketAlreadyClosed();
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 47](src/interfaces/IMarketEventsAndErrors.sol#L47)

	```solidity
	  error DepositToClosedMarket();
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 49](src/interfaces/IMarketEventsAndErrors.sol#L49)

	```solidity
	  error RepayToClosedMarket();
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 51](src/interfaces/IMarketEventsAndErrors.sol#L51)

	```solidity
	  error BorrowWhileSanctioned();
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 53](src/interfaces/IMarketEventsAndErrors.sol#L53)

	```solidity
	  error BorrowFromClosedMarket();
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 55](src/interfaces/IMarketEventsAndErrors.sol#L55)

	```solidity
	  error AprChangeOnClosedMarket();
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 57](src/interfaces/IMarketEventsAndErrors.sol#L57)

	```solidity
	  error CapacityChangeOnClosedMarket();
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 59](src/interfaces/IMarketEventsAndErrors.sol#L59)

	```solidity
	  error ProtocolFeeChangeOnClosedMarket();
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 61](src/interfaces/IMarketEventsAndErrors.sol#L61)

	```solidity
	  error ProtocolFeeNotChanged();
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 63](src/interfaces/IMarketEventsAndErrors.sol#L63)

	```solidity
	  error CloseMarketWithUnpaidWithdrawals();
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 65](src/interfaces/IMarketEventsAndErrors.sol#L65)

	```solidity
	  error AnnualInterestBipsTooHigh();
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 67](src/interfaces/IMarketEventsAndErrors.sol#L67)

	```solidity
	  error ReserveRatioBipsTooHigh();
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 69](src/interfaces/IMarketEventsAndErrors.sol#L69)

	```solidity
	  error ProtocolFeeTooHigh();
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 73](src/interfaces/IMarketEventsAndErrors.sol#L73)

	```solidity
	  error InsufficientReservesForNewLiquidityRatio();
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 75](src/interfaces/IMarketEventsAndErrors.sol#L75)

	```solidity
	  error InsufficientReservesForOldLiquidityRatio();
	```

- Found in src/interfaces/IMarketEventsAndErrors.sol [Line: 77](src/interfaces/IMarketEventsAndErrors.sol#L77)

	```solidity
	  error InvalidArrayLength();
	```

- Found in src/interfaces/ISphereXProtectedRegisteredBase.sol [Line: 5](src/interfaces/ISphereXProtectedRegisteredBase.sol#L5)

	```solidity
	  error SphereXOperatorRequired();
	```

- Found in src/interfaces/IWildcatArchController.sol [Line: 5](src/interfaces/IWildcatArchController.sol#L5)

	```solidity
	  error NotMarketFactory();
	```

- Found in src/interfaces/IWildcatArchController.sol [Line: 7](src/interfaces/IWildcatArchController.sol#L7)

	```solidity
	  error NotControllerFactory();
	```

- Found in src/interfaces/IWildcatArchController.sol [Line: 25](src/interfaces/IWildcatArchController.sol#L25)

	```solidity
	  error SphereXOperatorRequired();
	```

- Found in src/interfaces/IWildcatArchController.sol [Line: 27](src/interfaces/IWildcatArchController.sol#L27)

	```solidity
	  error SphereXAdminRequired();
	```

- Found in src/interfaces/IWildcatArchController.sol [Line: 29](src/interfaces/IWildcatArchController.sol#L29)

	```solidity
	  error SphereXOperatorOrAdminRequired();
	```

- Found in src/interfaces/IWildcatArchController.sol [Line: 31](src/interfaces/IWildcatArchController.sol#L31)

	```solidity
	  error SphereXNotPendingAdmin();
	```

- Found in src/interfaces/IWildcatArchController.sol [Line: 33](src/interfaces/IWildcatArchController.sol#L33)

	```solidity
	  error SphereXNotEngine();
	```

- Found in src/libraries/LibERC20.sol [Line: 25](src/libraries/LibERC20.sol#L25)

	```solidity
	  error TransferFromFailed();
	```

- Found in src/libraries/LibERC20.sol [Line: 28](src/libraries/LibERC20.sol#L28)

	```solidity
	  error TransferFailed();
	```

- Found in src/libraries/LibERC20.sol [Line: 31](src/libraries/LibERC20.sol#L31)

	```solidity
	  error BalanceOfFailed();
	```

- Found in src/libraries/LibERC20.sol [Line: 34](src/libraries/LibERC20.sol#L34)

	```solidity
	  error NameFailed();
	```

- Found in src/libraries/LibERC20.sol [Line: 37](src/libraries/LibERC20.sol#L37)

	```solidity
	  error SymbolFailed();
	```

- Found in src/libraries/LibERC20.sol [Line: 40](src/libraries/LibERC20.sol#L40)

	```solidity
	  error DecimalsFailed();
	```

- Found in src/libraries/LibStoredInitCode.sol [Line: 5](src/libraries/LibStoredInitCode.sol#L5)

	```solidity
	  error InitCodeDeploymentFailed();
	```

- Found in src/libraries/LibStoredInitCode.sol [Line: 6](src/libraries/LibStoredInitCode.sol#L6)

	```solidity
	  error DeploymentFailed();
	```

- Found in src/libraries/MathUtils.sol [Line: 19](src/libraries/MathUtils.sol#L19)

	```solidity
	  error MulDivFailed();
	```

- Found in src/spherex/SphereXConfig.sol [Line: 48](src/spherex/SphereXConfig.sol#L48)

	```solidity
	  error SphereXOperatorRequired();
	```

- Found in src/spherex/SphereXConfig.sol [Line: 49](src/spherex/SphereXConfig.sol#L49)

	```solidity
	  error SphereXAdminRequired();
	```

- Found in src/spherex/SphereXConfig.sol [Line: 50](src/spherex/SphereXConfig.sol#L50)

	```solidity
	  error SphereXOperatorOrAdminRequired();
	```

- Found in src/spherex/SphereXConfig.sol [Line: 51](src/spherex/SphereXConfig.sol#L51)

	```solidity
	  error SphereXNotPendingAdmin();
	```

- Found in src/spherex/SphereXConfig.sol [Line: 52](src/spherex/SphereXConfig.sol#L52)

	```solidity
	  error SphereXNotEngine();
	```

- Found in src/spherex/SphereXProtectedRegisteredBase.sol [Line: 56](src/spherex/SphereXProtectedRegisteredBase.sol#L56)

	```solidity
	  error SphereXOperatorRequired();
	```

</details>



## L-15: Potentially unused `private` / `internal` state variables found.

State variable appears to be unused. No analysis has been performed to see if any inilne assembly references it. So if that's not the case, consider removing this unused variable.

<details><summary>2 Found Instances</summary>


- Found in src/ReentrancyGuard.sol [Line: 28](src/ReentrancyGuard.sol#L28)

	```solidity
	  uint256 private constant _NOT_ENTERED = 0;
	```

- Found in src/ReentrancyGuard.sol [Line: 29](src/ReentrancyGuard.sol#L29)

	```solidity
	  uint256 private constant _ENTERED = 1;
	```

</details>



## L-16: Costly operations inside loops.

Invoking `SSTORE`operations in loops may lead to Out-of-gas errors. Use a local variable to hold the loop computation result.

<details><summary>6 Found Instances</summary>


- Found in src/access/AccessControlHooks.sol [Line: 399](src/access/AccessControlHooks.sol#L399)

	```solidity
	    for (uint256 i = 0; i < accounts.length; i++) {
	```

- Found in src/access/FixedTermLoanHooks.sol [Line: 436](src/access/FixedTermLoanHooks.sol#L436)

	```solidity
	    for (uint256 i = 0; i < accounts.length; i++) {
	```

- Found in src/libraries/FIFOQueue.sol [Line: 75](src/libraries/FIFOQueue.sol#L75)

	```solidity
	    for (uint256 i = 0; i < n; i++) {
	```

- Found in src/market/WildcatMarket.sol [Line: 274](src/market/WildcatMarket.sol#L274)

	```solidity
	    for (uint256 i; i < numBatches; i++) {
	```

- Found in src/market/WildcatMarketWithdrawals.sol [Line: 222](src/market/WildcatMarketWithdrawals.sol#L222)

	```solidity
	    for (uint256 i = 0; i < accountAddresses.length; i++) {
	```

- Found in src/market/WildcatMarketWithdrawals.sol [Line: 310](src/market/WildcatMarketWithdrawals.sol#L310)

	```solidity
	    while (i++ < numBatches && availableLiquidity > 0) {
	```

</details>



